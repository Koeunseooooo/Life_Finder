{% extends 'cal/base.html' %}
{% block content %}
    <div style="height: 100px"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

    <div class="line"> '당신이 등록한 라이프 뱃지'를 활용하여 여러관점에서의 통계 데이터들을 한곳에 모았습니다. </div>
    <br/>
    <br/>

    <div class="dash_detail" style="text-align: center">
        <button><a href="{% url 'cal:dash_detail' %}"> 한 눈에 보러가기 </a></button>
    </div>

    <br/>
    <br/>

    <h2 class="first_string">★이번달 라이프 현황★ </h2>
    <br/>

    {% for value in wanted_goal %}
        <h4 class="user_goal_des">라이프 목표 뱃지 개수 |
            <div class="user_goal_number"></div>
            <div class="goal">
                {{ value.goal_count }}개
{#                <button><a href="{% url 'create_profile:goal_get' %}">수정하기</a></button>#}
            </div>

        </h4>

        <div class="mychart0" style="width:700px; height: 200px ">
            <canvas id="myChart0"></canvas>
        </div>


        <script>
            var ctxx = document.getElementById("myChart0").getContext('2d');
            var myChart0 = new Chart(ctxx, {
                type: 'horizontalBar',
                data: {
                    labels: ["목표뱃지", "현재뱃지"],
                    datasets: [{
                        {#label: 1,#}
                        {#라벨 안쓰고 싶은데... ?#}
                        data: [{{ value.goal_count }}, {{ing}}],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(54, 162, 78, 0.2)',
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(10, 162, 78, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    maintainAspectRatio: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                    scales: {
                        xAxes: [{
                            ticks: {
                                beginAtZero: true,
                                max: 100
                            }
                        }]
                    }
                }
            });
        </script>


        {% if half > ing  %}
            <div>목표갯수에 도달할때까지 조금만 더 힘을 내요!</div>

        {% elif half <= ing and ing <= value.goal_count %}
            <div>목표갯수에 도달하기까지 얼마남지 않았어요! </div>

        {% elif ing > value.goal_count %}
            <div> 목표개수를 넘으셨군요! </div>
        {% endif %}

    {% endfor %}



    <br/>
    <br/>

    <h2 class="second_string">★최근 7일간 라이프 현황★ </h2>
    <br/>

    <h4 style="text-align: center">지난 7일간 모은 라이프 뱃지들을 살펴볼까요?</h4>
    <div class="mychart" style="width:600px; height:400px"><canvas id="myChart"></canvas></div>

    <script>
        var ctx = document.getElementById("myChart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [{{ mychart_month }}+'/'+{{mychart_six_days_ago}},{{ mychart_month }}+'/'+{{ mychart_five_days_ago}} , {{mychart_month }}+'/'+{{mychart_four_days_ago}}, {{ mychart_month }}+'/'+{{mychart_three_days_ago}}, {{ mychart_month }}+'/'+{{mychart_two_days_ago}}, {{ mychart_month }}+'/'+{{mychart_one_days_ago}}, {{ mychart_month }}+'/'+{{mychart_day}}],
                {# labels 날짜 좀 바뀌어라 제발 #}
                datasets: [{
                    {#label: 1,#}
                    {#라벨 안쓰고 싶은데... ?#}
                    data: [{{one_total}}, {{two_total}}, {{three_total}}, {{ four_total }}, {{five_total}}, {{six_total}}, {{seven_total}}],
                    backgroundColor: [
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                    ],
                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                title: {
                    display: false,
                },
                maintainAspectRatio: true, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            fontSize: 15
                        }
                    }]
                }
            }
        });
    </script>
        <h4 style="text-align: center">지난 7일간 최고의 순간!</h4>
        <div style="text-align: center">{{mychart_month }}/{{ real_best1_start_time_day }}</div>
        <div style="text-align: center">{{ select_event_str }}</div>
    <br/>
    <br/>
    <br/>



    <h4 style="text-align: center">지난 7일간 어떤 카테고리의 라이프를 가장 많이 즐겼나요?</h4>
    <br/>
    <div class="mychart9" style="width:800px; height:500px; margin: 0 auto; "><canvas id="myChart9"></canvas></div>

    <script>
        var ctx = document.getElementById("myChart9").getContext('2d');
        var myChart9 = new Chart(ctx, {
            type: 'bubble',
            data: {
                labels: "?",
                datasets: [
                    {
                      label: ["운동"],
                      backgroundColor: "rgba(255,221,50,0.2)",
                      borderColor: "rgba(255,221,50,1)",
                      data: [{
                        x: {{exercise_field_count}},
                        y: 1,
                        r: 4*{{ value1 }} +3
                      }]
                    }, {
                      label: ["여행"],
                      backgroundColor: "rgba(60,186,159,0.2)",
                      borderColor: "rgba(60,186,159,1)",
                      data: [{
                        x: {{travel_field_count}},
                        y: 1,
                        r: 4*{{ value2 }}+3
                      }]
                    }, {
                      label: ["기타"],
                      backgroundColor: "rgba(644,90,159,0.2)",
                      borderColor: "rgba(644,90,159,1)",
                      data: [{
                        x: {{etc_field_count}},
                        y: 1,
                        r: 4*{{value3}} +3
                      }]
                    }, {
                      label: ["친구"],
                      backgroundColor: "rgba(32,322,159,0.2)",
                      borderColor: "rgba(32,322,159,1)",
                      data: [{
                        x: {{friend_field_count}},
                        y: 1,
                        r: 4*{{value4}}+3
                      }]
                    } ,{
                      label: ["자기계발"],
                      backgroundColor: "rgba(12,99,159,0.2)",
                      borderColor: "rgba(12,99,159,1)",
                      data: [{
                        x: {{self_field_count}},
                        y: 1,
                        r: 4*{{value5}}+3
                      }]
                    }, {
                      label: ["취미생활"],
                      backgroundColor: "rgba(644,90,159,0.2)",
                      borderColor: "rgba(644,90,159,1)",
                      data: [{
                        x: {{hobby_field_count}},
                        y: 1,
                        r: 4*{{value6}}+3
                      }]
                    }, {
                      label: ["여가생활"],
                      backgroundColor: "rgba(255,221,50,0.2)",
                      borderColor: "rgba(255,221,50,1)",
                      data: [{
                        x: {{leisure_field_count}},
                        y: 1,
                        r: 4*{{value7}}+3
                      }]
                    }, {
                      label: ["일"],
                      backgroundColor: "rgba(12,99,159,0.2)",
                      borderColor: "rgba(12,99,159,1)",
                      data: [{
                        x: {{work_field_count}},
                        y: 1,
                        r: 4*{{value8}}+3
                      }]
                    }
                ]
            },
            options: {
                title: {
                display: false,
            }, scales: {
                yAxes: [{
                    ticks: {
                            beginAtZero: true,
                            stepSize: 3,
                            max: 2,
                            display:false
                        },
                    scaleLabel: {
                    display: false,
              }
            }]
        ,
                xAxes: [{
                     ticks: {
                            beginAtZero: true,
                            fontSize: 15,
                            max:7,
                            stepSize:1
                        },
                    scaleLabel: {
                    display: true,
                    labelString: "카테고리/여기 그래프 아예 갈아엎어야 함",
              }
            }]
          }
        }
    });
    </script>


    <h4 style="text-align: center">뱃지개수 당 몇개의 라이프 기록을 줬더라?</h4>
    <div calss="mychart4" style="width:1000px; margin: 0 auto;"><canvas id="myChart4"></canvas></div>

    <script>
        var ctx = document.getElementById("myChart4").getContext('2d');
        var myChart4 = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ["뱃지 1개 기록들", "뱃지 2개 기록들", "뱃지 3개 기록들", "뱃지 4개 기록들", "뱃지 5개 기록들"],
                datasets: [{
                    label: "안녕",
                    {#라벨 안쓰고 싶은데... ?#}
                    data: [{{one_count}}, {{two_count}}, {{three_count}}, {{ four_count }}, {{five_count}}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                title: {
                    display: false,
                    text: '뱃지개수 당 몇개의 라이프 기록을 줬더라?'
                },
                maintainAspectRatio: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                scales: {
                    yAxes: [{
                        beginAtZero: true,
                        display: false
                    }]

                }
            }
        });
    </script>

    <br/>
    <br/>

    <h2 class="second_string">★OH! HAPPY DAY!!★ </h2>

    <br/>

    <div class="mychart3" style="width:600px"><canvas id="myChart3"></canvas></div>
    <script>
        var ctx = document.getElementById("myChart3").getContext('2d');
        var myChart3 = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ["Mon", "Tue", "Wed", "Thur", "Fri", "Sat", "Sun"],
                datasets: [{
                    label: "안녕",
                    {#라벨 안쓰고 싶은데... ?#}
                    data: [{{mon}}, {{tue}}, {{wed}}, 10, {{fri}}, {{sat}}, {{sun}}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)',
                        'rgba(255, 100, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(255, 100, 64, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                title: {
                    display: false,
                },
                maintainAspectRatio: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                scales: {
                    yAxes: [{

                        beginAtZero: true,
                        display: false

                    }]


                }
            }
        });
    </script>

    <br/>
    <h5 style="text-align: center"> 당신은 {{ ing }}에 가장 오롯히 라이프를 즐기고 계시군요! </h5>
{#   {{ ing }} 대신 view에 넣을 변수 context에 넣어서 나중에 확인하기  #}

    <br/>
    <br/>

    <h2 class="second_string">★월별 라이프 비교★ </h2>
    <br/>

    <div class="mychart5" style="width:1000px; height:400px; margin:0 auto"><canvas id="myChart5"></canvas></div>

    <script>
        var ctx = document.getElementById("myChart5").getContext('2d');
        var myChart3 = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["1일", "2일", "3일", "4일", "5일", "6일", "7일","8일", "9일", "10일", "11일", "12일", "13일", "14일","15일", "16일", "17일", "18일", "19일", "20일", "21일","22일", "23일", "24일", "25일", "26일", "27일", "28일","29일", "30일"],
                datasets: [{
                    label: "이전달",
                    {#라벨 안쓰고 싶은데... ?#}
                    data: [{{real_pre_thirty_days_ago_rating}},{{real_pre_twentynine_days_ago_rating}},{{real_pre_twentyeight_days_ago_rating}},{{real_pre_twentyseven_days_ago_rating}},{{real_pre_twentysix_days_ago_rating}},{{real_pre_twentyfive_days_ago_rating}},{{real_pre_twentyfour_days_ago_rating}},{{real_pre_twentythree_days_ago_rating}},{{real_pre_twentytwo_days_ago_rating}},{{real_pre_twentyone_days_ago_rating}},{{real_pre_twenty_days_ago_rating}},{{real_pre_nineteen_days_ago_rating}},{{real_pre_eighteen_days_ago_rating}},{{real_pre_seventeen_days_ago_rating}},{{real_pre_sixteen_days_ago_rating}},{{real_pre_fifteen_days_ago_rating}},{{real_pre_fourteen_days_ago_rating}},{{real_pre_thirteen_days_ago_rating}},{{real_pre_twelve_days_ago_rating}},{{real_pre_eleven_days_ago_rating}},{{real_pre_ten_days_ago_rating}},{{real_pre_nine_days_ago_rating}},{{real_pre_eight_days_ago_rating}},{{real_pre_seven_days_ago_rating}},{{real_pre_six_days_ago_rating}},{{real_pre_five_days_ago_rating}},{{real_pre_four_days_ago_rating}},{{real_pre_three_days_ago_rating}},{{real_pre_two_days_ago_rating}},{{real_pre_one_days_ago_rating}}],
                    borderColor: [
                        'rgba(255, 206, 86, 1)',
                    ],
                    borderWidth: 1,
                    fill:false
                }, {
                    label: "이번달",
                    data: [{{real_thirty_days_ago_rating}},{{real_twentynine_days_ago_rating}},{{real_twentyeight_days_ago_rating}},{{real_twentyseven_days_ago_rating}},{{real_twentysix_days_ago_rating}},{{real_twentyfive_days_ago_rating}},{{real_twentyfour_days_ago_rating}},{{real_twentythree_days_ago_rating}},{{real_twentytwo_days_ago_rating}},{{real_twentyone_days_ago_rating}},{{real_twenty_days_ago_rating}},{{real_nineteen_days_ago_rating}},{{real_eighteen_days_ago_rating}},{{real_seventeen_days_ago_rating}},{{real_sixteen_days_ago_rating}},{{real_fifteen_days_ago_rating}},{{real_fourteen_days_ago_rating}},{{real_thirteen_days_ago_rating}},{{real_twelve_days_ago_rating}},{{real_eleven_days_ago_rating}},{{real_ten_days_ago_rating}},{{real_nine_days_ago_rating}},{{real_eight_days_ago_rating}},{{real_seven_days_ago_rating}},{{real_six_days_ago_rating}},{{real_five_days_ago_rating}},{{real_four_days_ago_rating}},{{real_three_days_ago_rating}},{{real_two_days_ago_rating}},{{real_one_days_ago_rating}}],
                    borderColor: [
                        'rgba(255, 06, 86, 1)',
                    ],
                    borderWidth: 1,
                    fill:false
                }
                ]
            },
            options: {
                title: {
                    display: false
                },
                maintainAspectRatio: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                scales: {
                    yAxes: [{
                        beginAtZero: true,
                        display: true,

                    }]
                }
            }
        });
    </script>

    <br/>
    <br/>

    <h4 style="text-align: center"> 이전달 총 뱃지 개수 : {{ real_pre_month_end_total }}     이전달 평균 뱃지 개수 : {{ pre_month_end_meanvalue }} </h4>
    <h4 style="text-align: center"> 이번달 총 뱃지 개수 : {{ real_present_month_total }}     이번달 평균 뱃지 개수 : {{ present_month_meanvalue }} </h4>
    {%  if pre_month_end_total_count < 10 %}
        <div> 저번달 데이터가 너무 부족해서 메세지(?) or 조언(?) 을 띄울 수 없습니다</div>
    {%  else %}
        {% if present_month_meanvalue >= pre_month_end_meanvalue  %}
            {% if real_present_month_total >= real_pre_month_end_total %}
                <div> 총개수랑 총평균 둘다 이번달이 좋을때</div>
            {% elif real_present_month_total < real_pre_month_end_total %}
                <div> 총개수는 안좋은데 총평균이 이번달이 좋을 때 </div>
            {% endif %}
        {% elif present_month_meanvalue < pre_month_end_meanvalue %}
            {% if real_present_month_total < real_pre_month_end_total %}
                <div> 총개수랑 총평균 둘다 이번달이 안좋을 때</div>
            {% elif real_present_month_total >= real_pre_month_end_total %}
                <div> 총평균은 안좋은데 총개수가 이번달이 좋을 때 </div>
            {% endif %}
        {% endif %}
    {% endif %}


{% endblock %}



